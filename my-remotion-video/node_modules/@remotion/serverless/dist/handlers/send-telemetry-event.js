"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.sendTelemetryEvent = void 0;
const licensing_1 = require("@remotion/licensing");
const renderer_1 = require("@remotion/renderer");
const sendTelemetryEvent = async (apiKey, logLevel) => {
    if (apiKey === null) {
        return Promise.resolve();
    }
    try {
        // https://www.remotion.dev/docs/licensing
        await (0, licensing_1.registerUsageEvent)({
            apiKey,
            event: 'cloud-render',
            host: null,
            succeeded: true,
        });
        renderer_1.RenderInternals.Log.info({ indent: false, logLevel }, 'Telemetry event sent');
    }
    catch (err) {
        renderer_1.RenderInternals.Log.error({ indent: false, logLevel }, 'Failed to send telemetry event');
        renderer_1.RenderInternals.Log.error({ indent: true, logLevel }, err);
        return Promise.resolve();
    }
};
exports.sendTelemetryEvent = sendTelemetryEvent;
