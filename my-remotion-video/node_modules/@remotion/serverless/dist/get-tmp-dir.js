"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getTmpDirStateIfENoSp = void 0;
const serverless_client_1 = require("@remotion/serverless-client");
const getTmpDirStateIfENoSp = (err, insideFunctionSpecifics) => {
    if (!(0, serverless_client_1.errorIsOutOfSpaceError)(err)) {
        return null;
    }
    const files = insideFunctionSpecifics.getFolderFiles('/tmp');
    return {
        files: files
            .slice(0)
            .sort((a, b) => a.size - b.size)
            .reverse()
            .slice(0, 100),
        total: files.reduce((a, b) => a + b.size, 0),
    };
};
exports.getTmpDirStateIfENoSp = getTmpDirStateIfENoSp;
